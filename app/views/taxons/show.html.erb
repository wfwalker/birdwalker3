<div class="lead">
  <%= @page_title %>
  (<i><%= @taxon.latin_name %></i>) in
  <i><%= link_to @taxon.family, taxon_family_name_path(@taxon.family) %></i>
</div>

<div class='row'>

  <div class='col-sm-6'>
    <div class="pagecontentmodule">
      <div class="moduletitle">Photos by Bill Walker</div>  

      <%= render :partial => 'photos/gallery', :object => @taxon.photos %>
    </div>
  </div>

  <div class='col-sm-6'>  
    <div id='mapContainer'>
      <% if (@taxon.locations.with_lat_long.size > 0) %>
      <% @map_module_title = 'Species Map' %>                       
        <%= render :partial => 'locations/google', :locals => { :map_width => column_width, :map_height => column_width, :locations_json_url => '/taxons/locations/%s.json' % @taxon.id } %>
      <% end %>
    </div>

    <div class="pagecontentmodule">
      <% if @taxon.common? %>
        <div class="moduletitle">Species Notes</div>  

        <div class="pagecontentitem">
          From <%= render :partial => 'sightings/full_details', :object => @taxon.sightings.earliest %> to 
          <%= render :partial => 'sightings/full_details', :object => @taxon.sightings.latest %>,
          we've seen <%= @taxon.common_name %> roughly
          <%= @taxon.sightings.size / (@taxon.trips.latest.date.year - @taxon.trips.earliest.date.year) %>
          times a year
          at <%= @taxon.locations.size %> different locations.         
        </div>  

        <div class="modulesubtitle">Sightings by Month</div>  
        
        <div class="pagecontentitem">
          <% month_totals = Sighting.map_by_month(@taxon.sightings) %>
          <%= render :partial => 'sightings/species_by_month', :object => month_totals %>
        </div>
      <% else %>
        <div class="moduletitle">Sightings</div>  
        <%= render :partial => 'sightings/date_and_location_link', :collection => Sighting.sort_chronological(@taxon.sightings) %>
      <% end %>
    </div>
  </div>

</div>
